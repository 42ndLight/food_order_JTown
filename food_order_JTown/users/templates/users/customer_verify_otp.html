{% extends 'core/base.html' %}
{% block content %}
  <div class="container">
    <h2>Verify OTP</h2>
    <p>Please enter the OTP sent to your phone number.</p>

    {% if form.errors %}
      <div class="alert alert-danger">
        {% for field in form %}
          {% for error in field.errors %}
            <p>{{ error }}</p>
          {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
          <p>{{ error }}</p>
        {% endfor %}
      </div>
    {% endif %}

    {% if messages %}
      <div class="alert alert-info">
        {% for message in messages %}
          <p>{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" action="{% url 'users:customer_verify_otp' %}?token={{ request.GET.token }}">
      {% csrf_token %}
      <div class="form-group">
        <label for="{{ form.otp_code.id_for_label }}">OTP Code:</label>
        {{ form.otp_code }}
        <small class="form-text text-muted">{{ form.otp_code.help_text }}</small>
      </div>
      <button type="submit" class="btn btn-primary">Verify OTP</button>
    </form>

    <p class="mt-3">
      Didn't receive an OTP? <a href="{% url 'users:customer_send_otp' %}">Request a new one</a>
    </p>
  </div>
{% endblock %}